import { createTaskService, updateTaskService } from '../services/taskService';

export async function createTaskController (req, res) {
    const data = req.body;

    try {
        const createTask = await createTaskService(data);

        return res.status(200).json(createTask);

    } catch (error) {
        if (error.type === "INVALID_INPUT") {
            return res.status(400).json({error: error.message});
        }
        return res.status(500).json({error: 'Internal server error'});
    }
}

export async function updateTaskController (req, res) {
    const {taskId} = req.params;
    const data = req.body;

    if (!taskId) {
        return res.status(400).json({error: 'Missing Parameters'});
    }

    try {
        const updatedTask = await updateTaskService({
            taskId,
            data,
        });

        return res.status(200).json(updatedTask);
        
    } catch (error) {
        if (error.type === "NOT_FOUND") {
            return res.status(404).json({error: error.message});
        }

        if (error.type === "FORIDDEN") {
            return res.status(403).json({error: error.message});
        }

        if (error.type === "INVALID_STATE") {
            return res.status(409).json({error: error.message});
        }

        return res.status(500).json({error: 'Internal server error'});
    }
}